# c++ 并发编程
## 并发与并行
1. 区别
* 并发：多个任务交互占用cpu资源的进行作业，在单核cpu上表现为轮流完成一个任务的一部分。在多核cpu表现为同一时间点同时执行多个任务。是一种不严格（假）并行。由于cpu运算速度极快，给用户一种在同一时间点执行了多个任务的错觉。
* 并行：可理解为必须在同一时间点上同时执行多个任务的并发，也就表明必须在一个多核cpu或者多颗cpu才能够实现这种特性。
2. 为什么使用并发？
* 主要关注分离和性能，结合其一种或二者都有的特点。
* 分离点：及在编写软件时，将相关代码与无关代码分离，使得程序更容易理解和测试，减少出错的可能性。
* 性能点：提高性能。（1）将一个单个任务分成几部分的子任务，各自并行运行，从而降低总运行时间，这就是任务并行。由于各个子任务之间可能存在依赖，导致实现过程复杂。有两种情况，一种情况三一个线程执行算法的一部分、另外一个现场执行算法的另外一部分。另外一种情况，每个线程在不同的数据部分上执行相同的操作，这就是一个易并行。
3. 使用并发需要注意的情况
*  使用并发的代码，难以理解也容易引发更多错误。只有在足够清楚性能提高很大或者分离点清晰，才使用并发。
*  线程所使用的资源三有限的，过多的线程会导致消耗过多的操作系统资源，使得操作系统整体上运行更加缓慢。
4. 并发中过多的线程可能出现的情况
* 处于C/S模式的服务器中为每一个连接启动一个独立的线程，对于少量的连接可以正常工作。当需要大量连接时，也会由于过多线程导致耗尽系统资源。这种情况可以使用线程池化技术。
* 越多的线程，操作系统就需要越多的上下文切换，增加占用正常工作的时间成本。

## c++中的线程
1. 使用c++11标准，能够编写不依赖与平台的多线程代码。
2. 熟悉c++11标准的 thread库  
std::thread对象:  
```c++
 void doSomeThing()
 {
    .....
 }
 std::thread myThread(doSomeThing); //创建了一个线程,该线程构造完成后直接执行doSomeThing函数
```

